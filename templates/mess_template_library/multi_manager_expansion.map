{
"classname" "worldspawn"
"origin" "0 0 0"
"mapversion" "220"
"_allow_rewrite_rules" ""
"targets" "{get_attr().filter(a => !['classname','targetname','origin','spawnflags','template_map'].contains(a.key)).sort(a => num(a.value))}"
"mm_is_multithreaded" "{hasflag(0)}"
}
{
"classname" "macro_insert"
"instance_offset" "0 0 0"
"instance_geometry_scale" "1 1 1"
"scale" "1"
"angles" "0 0 0"
"instance_orientation" "0"
"instance_count" "{targets.length <= 16 ? 1 : ceil((targets.length + 1) / 16)}"
"template_name" "multi_manager_template"
"mm_name" "{nth() == 0 ? targetname : targetname + '_' + iid()}"
"mm_targets" "{targets.length <= 16 ? targets : nth() == 0 ? targets.skip(targets.length - 15).insert(0, { key: targetname + '_' + iid(), value: '0' }) : targets.skip((nth() - 1) * 16).take(min(16, targets.length - 15 - ((nth() - 1) * 16)))}"
"mm_is_multithreaded" "{mm_is_multithreaded}"
"origin" "0 0 0"
}
{
"classname" "macro_template"
"selection_weight" "1"
"anchor" "1"
"targetname" "multi_manager_template"
{
( 128 128 128 ) ( 128 128 0 ) ( 128 136 128 ) C3A2A_TNK1B [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 136 128 ) ( 256 136 0 ) ( 256 128 128 ) C3A2A_TNK1B [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 128 136 128 ) ( 128 136 0 ) ( 256 136 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 128 128 ) ( 256 128 0 ) ( 128 128 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 128 128 ) ( 128 128 128 ) ( 256 136 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
( 128 136 0 ) ( 128 128 0 ) ( 256 136 0 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
}
{
( 128 248 128 ) ( 128 248 0 ) ( 128 256 128 ) C3A2A_TNK1B [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 256 128 ) ( 256 256 0 ) ( 256 248 128 ) C3A2A_TNK1B [ 0 1 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 128 256 128 ) ( 128 256 0 ) ( 256 256 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 248 128 ) ( 256 248 0 ) ( 128 248 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 0 -1 0 ] 0 1 1
( 256 248 128 ) ( 128 248 128 ) ( 256 256 128 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
( 128 256 0 ) ( 128 248 0 ) ( 256 256 0 ) C3A2A_TNK1B [ 1 0 0 0 ] [ 0 -1 0 0 ] 0 1 1
}
}
{
"classname" "multi_manager"
"targetname" "{mm_name}"
"{mm_targets.map(t => t.key)}" "{mm_targets.map(t => t.value)}"
"_spawnflag0" "{mm_is_multithreaded}"
"origin" "192 192 64"
}
{
"classname" "macro_insert"
"instance_offset" "0 0 0"
"instance_geometry_scale" "1 1 1"
"scale" "1"
"angles" "0 0 0"
"instance_orientation" "0"
"instance_count" "{mm_targets.length}"
"template_map" "{map_dir() + '/target_pattern_handler.map'}"
"target" "{mm_targets[nth()].key}"
"origin" "192 192 64"
}
